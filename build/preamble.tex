\usepackage{xcolor}
\usepackage[
    colorlinks=true,
    linkcolor=black,
    urlcolor=blue,
    citecolor=black
]{hyperref}
\usepackage{url}
\usepackage{listings}
\usepackage{upquote}
\usepackage{graphicx}
\usepackage{titlepic}
\usepackage{fancyhdr}
\usepackage{etoolbox}
\usepackage{titlesec}
\usepackage{enumitem}
\usepackage{tocloft}
\usepackage{amssymb}

\providecommand{\version}{}%
\providecommand{\builddate}{\today}%
\newcommand{\passthrough}[1]{#1}
\providecommand{\tightlist}{%
\setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}

\setlist{nolistsep}
\setlist[itemize]{leftmargin=*}

\titlepic{\centering
    \includegraphics[width=\textwidth,height=0.4\textheight,keepaspectratio]{media/write-that-down.png}
}

\setcounter{tocdepth}{3} 
\setcounter{secnumdepth}{-2} 
\providecommand{\cftsecpresnum}{}
\providecommand{\cftsecpostnum}{}
\providecommand{\cftsubsecpresnum}{}
\providecommand{\cftsubsecpostnum}{}
\providecommand{\cftsubsubsecpresnum}{}
\providecommand{\cftsubsubsecpostnum}{}
\setlength{\cftsecnumwidth}{0pt}
\setlength{\cftsubsecnumwidth}{0pt}
\setlength{\cftsubsubsecnumwidth}{0pt}

\titlelabel{}

\makeatletter
\AtBeginDocument{%
    \pagestyle{fancy}
    \fancyhf{}
    \fancyfoot[C]{\thepage}
    \fancyfoot[R]{\footnotesize\ttfamily \version\ \textbar\ Last edited on \builddate}%
    \fancypagestyle{plain}{%
        \fancyhf{}%
        \fancyfoot[C]{\thepage}%
        \fancyfoot[R]{\footnotesize\ttfamily \version\ \textbar\ Last edited on \builddate}%
    }%
    \renewcommand{\headrulewidth}{0pt}
    \renewcommand{\footrulewidth}{0pt}
    \setlength{\footskip}{18pt}


}
\makeatother

\preto\section{\clearpage}
\titleformat{\section}[display]
    {\centering\bfseries\Huge}{}{0pt}{\vspace*{\fill}}[\vspace*{\fill}\thispagestyle{empty}\clearpage]

\preto\subsection{\clearpage}

\titlespacing*{\section}{0pt}{0pt}{0pt}

\definecolor{lightgray}{rgb}{0.95, 0.95, 0.95}
\definecolor{darkgray}{rgb}{0.4, 0.4, 0.4}

\lstset{
    inputencoding=utf8,
    breaklines=true,
    breakatwhitespace=false,
    columns=fullflexible,
    keepspaces=true,
    showstringspaces=false,
    basicstyle=\ttfamily\small,
    upquote=true,
    breakautoindent=false,
    breakindent=0pt,
    postbreak=\mbox{},
    escapechar=42,
    backgroundcolor=\color{lightgray},
    frame=single,
    framesep=5pt,
    framerule=0.5pt,
    rulecolor=\color{darkgray},
    xleftmargin=3mm,
    xrightmargin=3mm,
    literate=
    {‘}{{\textquotesingle}}1
    {’}{{\textquotesingle}}1
    {“}{{\textquotedbl}}1
    {”}{{\textquotedbl}}1
    {–}{{-}}1
    {—}{{-}}1
    {…}{{\ldots}}1
}
